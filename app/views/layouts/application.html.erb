<!DOCTYPE html>
<%= stylesheet_link_tag 'application', media: 'all', 'data-turbo-track': 'reload' %>

<html>
<head>
  <title>FeTouchGrass2311</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>
<body>
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand has-background-black-ter">
      <p class="navbar-item bubbly-heading is-size-5 has-text-white">Touch Grass</p>

      <a role="button" class="navbar-burger has-background-black-ter has-text-white" aria-label="menu" aria-expanded="false" data-target="navbarMenu" data-controller="navbar" data-action="click->navbar#toggle">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div id="navbarMenu" class="navbar-menu has-background-black-ter" data-navbar-target="menu">
      <div class="navbar-start has-background-primary-dark">
        <% if current_user.present? %>
          <%= link_to "My Virtual Garden", "/dashboard/#{current_user.uid}", class: "navbar-item has-text-white has-background-black-ter", data: { turbo: false } %>
          <%= link_to "Plant Search", search_plants_path, class: "navbar-item has-text-white has-background-black-ter", data: { turbo: false } %>
        <% end %>
      </div>
    </div>
  </nav>

  <%= yield %>

  <script>
    document.addEventListener('turbo:load', function () {
      const burgerIcon = document.querySelector('.navbar-burger');
      const navbarMenu = document.getElementById('navbarMenu');

      burgerIcon.addEventListener('click', function () {
        burgerIcon.classList.toggle('is-active');
        navbarMenu.classList.toggle('is-active');
      });
    });
  </script>
</body>
</html>
